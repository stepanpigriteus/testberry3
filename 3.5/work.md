Организатору важно не держать такие «мертвые души», а освободить место для других. Поэтому в реальных системах бронирования всегда есть правило: если не оплатил (подтвердил) в течение определенного времени — бронь аннулируется.

В этом задании вы реализуете сервис, который позволяет создавать мероприятия, бронировать места, оплачивать их — и автоматически отменять неоплаченные брони через заданный интервал времени. Это — почти готовое ядро для небольшой регистрационной системы по регистрации

Бронирование не «вечное»: если в течение N минут/часов бронь не оплачена — она автоматически отменяется.  Для этого реализуйте фоновый процесс, который отслеживает время создания брони и удаляет просроченные (используйте очередь или планировщик наподобие cron). Все действия с базой данных должны быть безопасны — используйте транзакции, чтобы избежать гонок данных.

Требования
Сервис должен поддерживать:

встроенные HTTP-методы:
– POST /events — создание мероприятия;
– POST /events/{id}/book — бронирование места;
– POST /events/{id}/confirm — оплата брони (если мероприятие требует этого);
– GET /events/{id} — получение информации о мероприятии и свободных местах.
фоновый обработчик, отменяющий неоплаченные бронирования по истечении срока оплаты (используя очереди или cron-like scheduler)
простой веб-интерфейс, где можно:
– создать мероприятие (форма с названием, датой и количеством мест);
– просматривать список мероприятий и их статус (свободные места, текущие брони);
– забронировать место;
– подтвердить бронь;
– отслеживать, что не подтвержденные брони исчезают после заданного времени;
– по одной странице на пользовательскую и администраторскую части, не обязательно красиво, главное — понятно. Это добавит контекст пользователя и позволит быстро протестировать логику сервиса глазами обычного пользователя в разных ролях.
Дополнительно (будет плюсом):

уведомления пользователей об отмене бронирования через Email или Telegram;
поддержка регистрации нескольких пользователей (и учитывать их в бронированиях);
возможность настраивать разный срок жизни брони для разных мероприятий.
Решение
