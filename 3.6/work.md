Во многих сервисах нужно не просто хранить записи (например, транзакции, заказы, события), но и уметь анализировать их: смотреть сумму продаж за период, количество заказов в день, средний чек, медиану, перцентиль и т.п. Это может быть полезно в личных финансовых приложениях, системах учёта заказов, внутренних CRM-инструментах и многих других случаях.

В этом задании вы реализуете сервис, который умеет не только выполнять CRUD-операции (создание, обновление, удаление и просмотр записей), но и собирать по этим данным аналитику: рассчитывать суммы, средние значения, медианы, перцентили и т.д. Такая задача — отличная тренировка в работе с SQL-запросами и обработкой данных.

Все данные должны храниться в PostgreSQL. Для агрегации, фильтрации, расчёта медианы и перцентилей (с помощью оконных функций или подзапросов) нужно использовать SQL-запросы. Данные желательно валидировать (например, сумма не может быть отрицательной, дата должна быть валидной и т.п.). Не забывайте про SQL-инъекции. Важно уметь писать быстрые и эффективные запросы к БД, но если на этом этапе не получается — напишите как есть, плохой результат лучше отсутствия отличного.

Сервис должен поддерживать:

встроенные HTTP-методы:
– CRUD-операции (например, финансовые транзакции или продажи);
– POST /items;
– GET /items;
– PUT /items/{id};
– DELETE /items/{id} 
возможность получения агрегированной аналитики:
– сумма (sum)
– среднее (avg)
– количество (count)
– медиана
– 90-й перцентиль
Например:

    GET /analytics?from={}&amp;to={}
Сделайте простой веб-интерфейс, где можно:

добавлять новые записи (например, "доход", "расход", сумма, дата, категория);
просматривать таблицу всех записей с фильтрами;
получать сводную аналитику за период (график или просто числа);
скачивать данные в CSV (если реализовано);
Интерфейс можно реализовать даже на HTML + JS (без фреймворков), главное — чтобы работали все основные сценарии.

Дополнительно (будет плюсом):

экспорт отчётов в CSV;
возможность сортировки по различным полям;
возможность группировки по дням, неделям, категориям и т.д.